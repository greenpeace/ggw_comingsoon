!function(e){e.fn.autogrow=function(i){function t(t){var n,s=e(this),o=s.innerHeight(),a=this.scrollHeight,h=s.data("autogrow-start-height")||0;if(a>o)this.scrollTop=0,i.animate?s.stop().animate({height:a},i.speed):s.innerHeight(a);else if(!t||8==t.which||46==t.which||t.ctrlKey&&88==t.which)if(o>h){n=s.clone().addClass(i.cloneClass).css({position:"absolute",zIndex:-10,height:""}).val(s.val()),s.after(n);do a=n[0].scrollHeight-1,n.innerHeight(a);while(a===n[0].scrollHeight);a++,n.remove(),s.focus(),h>a&&(a=h),o>a&&i.animate?s.stop().animate({height:a},i.speed):s.innerHeight(a)}else s.innerHeight(h)}var n=e(this).css({overflow:"hidden",resize:"none"}),s=n.selector,o={context:e(document),animate:!0,speed:200,fixMinHeight:!0,cloneClass:"autogrowclone",onInitialize:!1};return i=e.isPlainObject(i)?i:{context:i?i:e(document)},i=e.extend({},o,i),n.each(function(n,s){var o,a;s=e(s),s.is(":visible")||parseInt(s.css("height"),10)>0?o=parseInt(s.css("height"),10)||s.innerHeight():(a=s.clone().addClass(i.cloneClass).val(s.val()).css({position:"absolute",visibility:"hidden",display:"block"}),e("body").append(a),o=a.innerHeight(),a.remove()),i.fixMinHeight&&s.data("autogrow-start-height",o),s.css("height",o),i.onInitialize&&t.call(s)}),i.context.on("keyup paste",s,t),n}}(jQuery);