/*! Ajax-Include - v0.1.3 - 2014-05-21
* http://filamentgroup.com/lab/ajax_includes_modular_content/
* Copyright (c) 2014 @scottjehl, Filament Group, Inc.; Licensed MIT */
!function(t,a){var e={boundAttr:"data-ajax-bound",interactionAttr:"data-interaction",makeReq:function(a,e){t.get(a,function(t,a,n){e.trigger("ajaxIncludeResponse",[t,n])})},plugins:{}};t.fn.ajaxInclude=function(n){function r(a){var n=a.data("url");u.proxy&&-1===t.inArray(n,o)?(o.push(n),c=c.add(a)):e.makeReq(n,a)}function i(){o.length&&(e.makeReq(u.proxy+o.join(","),c),c=t(),o=[])}function d(t,e){function n(){r(t),i(),d.removeListener(n)}var d=a.matchMedia(e);d.addListener&&d.addListener(n)}var o=[],c=t(),u={proxy:null};return"string"==typeof n?u.proxy=n:u=t.extend(u,n),this.not("["+e.boundAttr+"]").not("["+e.interactionAttr+"]").each(function(){for(var n,i,o=t(this),c=o.attr("data-media"),l=["append","replace","before","after"],h=!1,f=o.attr("data-target"),g=l.length,s=0;g>s;s++)o.is("[data-"+l[s]+"]")&&(n=l[s],i=o.attr("data-"+n));i||(i=o.attr("href")||o.attr("action"),h=!0),"replace"===n&&(n+="With"),o.data("method",n).data("url",i).data("target",f).attr(e.boundAttr,!0).each(function(){for(var t in e.plugins)e.plugins[t].call(this,u)}).bind("ajaxIncludeResponse",function(a,e){var r=e,i=f?t(f):o;if(u.proxy){var d=r.match(new RegExp("<entry url=[\"']?"+o.data("url")+"[\"']?>(?:(?!</entry>)(.|\n))*","gmi"));d&&(r=d[0])}var c=o.triggerHandler("ajaxIncludeFilter",[r]);c&&(r=c),"replaceWith"===n?(o.trigger("ajaxInclude",[r]),i[o.data("method")](r)):(i[o.data("method")](r),o.trigger("ajaxInclude",[r]))}),h?e.makeReq(i,o,!0):!c||a.matchMedia&&a.matchMedia(c).matches?r(o):c&&a.matchMedia&&d(o,c)}),i(),this},a.AjaxInclude=e}(jQuery,this);