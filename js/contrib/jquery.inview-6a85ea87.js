!function($){function getViewportSize(){var mode,domObject,size={height:w.innerHeight,width:w.innerWidth};return size.height||(mode=d.compatMode,(mode||!$.support.boxModel)&&(domObject="CSS1Compat"===mode?documentElement:d.body,size={height:domObject.clientHeight,width:domObject.clientWidth})),size}function getViewportOffset(){return{top:w.pageYOffset||documentElement.scrollTop||d.body.scrollTop,left:w.pageXOffset||documentElement.scrollLeft||d.body.scrollLeft}}function checkInView(){var elementsLength,$elements=$(),i=0;if($.each(inviewObjects,function(i,inviewObject){var selector=inviewObject.data.selector,$element=inviewObject.$element;$elements=$elements.add(selector?$element.find(selector):$element)}),elementsLength=$elements.length)for(viewportSize=viewportSize||getViewportSize(),viewportOffset=viewportOffset||getViewportOffset();elementsLength>i;i++)if($.contains(documentElement,$elements[i])){var visiblePartX,visiblePartY,visiblePartsMerged,$element=$($elements[i]),elementSize={height:$element.height(),width:$element.width()},elementOffset=$element.offset(),inView=$element.data("inview");if(!viewportOffset||!viewportSize)return;elementOffset.top+elementSize.height>viewportOffset.top&&elementOffset.top<viewportOffset.top+viewportSize.height&&elementOffset.left+elementSize.width>viewportOffset.left&&elementOffset.left<viewportOffset.left+viewportSize.width?(visiblePartX=viewportOffset.left>elementOffset.left?"right":viewportOffset.left+viewportSize.width<elementOffset.left+elementSize.width?"left":"both",visiblePartY=viewportOffset.top>elementOffset.top?"bottom":viewportOffset.top+viewportSize.height<elementOffset.top+elementSize.height?"top":"both",visiblePartsMerged=visiblePartX+"-"+visiblePartY,inView&&inView===visiblePartsMerged||$element.data("inview",visiblePartsMerged).trigger("inview",[!0,visiblePartX,visiblePartY])):inView&&$element.data("inview",!1).trigger("inview",[!1])}}var viewportSize,viewportOffset,timer,inviewObjects={},d=document,w=window,documentElement=d.documentElement,expando=$.expando;$.event.special.inview={add:function(data){inviewObjects[data.guid+"-"+this[expando]]={data:data,$element:$(this)},timer||$.isEmptyObject(inviewObjects)||(timer=setInterval(checkInView,250))},remove:function(data){try{delete inviewObjects[data.guid+"-"+this[expando]]}catch(e){}$.isEmptyObject(inviewObjects)&&(clearInterval(timer),timer=null)}},$(w).bind("scroll resize scrollstop",function(){viewportSize=viewportOffset=null}),!documentElement.addEventListener&&documentElement.attachEvent&&documentElement.attachEvent("onfocusin",function(){viewportOffset=null})}(jQuery);