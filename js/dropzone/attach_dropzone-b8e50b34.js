$(function(){$("#previews").sortable({handle:".preview",items:":not(.disabled)"});var previewNode=$("#template");previewNode.removeAttr("id");var previewTemplate=previewNode.parent().html();if($(previewNode).remove(),$("body").hasClass("page-type-photo"))var myDropzone=new Dropzone(document.body,{url:"http://www.tubanters.nl/tmp/upload.php",thumbnailWidth:80,thumbnailHeight:80,parallelUploads:20,maxFilesize:3,acceptedFiles:"image/*",accept:function(file,done){var pixels=0,reader=new FileReader;reader.onload=function(file){var image=new Image;image.src=file.target.result,image.onload=function(){pixels=this.width*this.height,2e4>pixels?done("This file is too small"):done()}},reader.readAsDataURL(file)},previewTemplate:previewTemplate,previewsContainer:"#previews",clickable:".fileinput-button"});else if($("body").hasClass("page-type-document")){var myDropzone=new Dropzone(document.body,{url:"http://www.tubanters.nl/tmp/upload.php",thumbnailWidth:80,thumbnailHeight:80,parallelUploads:20,maxFilesize:15,acceptedFiles:".doc, .docx, .xls, .xlsx, .ppt, .pptx, .odt, .odp, .ods, .pdf",previewTemplate:previewTemplate,previewsContainer:"#previews",clickable:".fileinput-button"});myDropzone.on("addedfile",function(file){var ext=file.name.split(".").pop();file.previewElement.querySelector(".image-preview").className+=" "+ext,file.previewElement.querySelector(".image-preview").innerHTML=""})}myDropzone.on("addedfile",function(file){$("#previews").sortable("reload"),$(".dropzone-droparea").addClass("dz-started"),file.previewElement.querySelector(".start").onclick=function(){myDropzone.enqueueFile(file)}}),myDropzone.on("error",function(file){file.previewElement.querySelector(".preview").style.opacity=".5",file.previewElement.querySelector(".name").remove(),file.previewElement.querySelector(".start").remove()}),myDropzone.on("totaluploadprogress",function(progress){$("#total-progress .progress-bar").css("width",progress+"%")}),myDropzone.on("sending",function(file){$("#total-progress").css("opacity","1"),file.previewElement.querySelector(".start").setAttribute("disabled","disabled")}),myDropzone.on("queuecomplete",function(progress){$("#total-progress").css("opacity","0")}),$("#dropzone-actions .start").on("click",function(){myDropzone.enqueueFiles(myDropzone.getFilesWithStatus(Dropzone.ADDED)),$("#previews").sortable("reload")}),$("#dropzone-actions .cancel").on("click",function(){myDropzone.removeAllFiles(!0),$(".dropzone-droparea").removeClass("dz-started")})});