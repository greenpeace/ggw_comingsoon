!function($){$.fn.nicefileinput=function(options){var settings={fullPath:!1};return options&&$.extend(settings,options),this.each(function(){var self=this;if(void 0===$(self).attr("data-styled")){var r=Math.round(1e4*Math.random()),d=new Date,guid=d.getTime()+r.toString(),filename=$('<input type="text" readonly="readonly">').addClass("nfi-filename nfi"+guid),wrapper=$("<div>").addClass("nfi-button nfi"+guid);$(self).after(filename),$(self).wrap(wrapper),$(".nfi"+guid).wrapAll('<div class="nfi-wrapper" id="nfi-wrapper-'+guid+'" />'),$("#nfi-wrapper-"+guid).addClass($(self).attr("class")),$(self).attr("data-tip")&&($("#nfi-wrapper-"+guid).attr("data-tip",$(self).attr("data-tip")),$("#nfi-wrapper-"+guid).addClass("tooltip"),$(self).removeAttr("data-tip"),$(self).removeClass("tooltip")),$(self).addClass("nfi-current"),$(self).on("change",function(){var fullPath=$(self).val();if(settings.fullPath)filename.val(fullPath);else{var pathArray=fullPath.split(/[/\\]/);filename.val(pathArray[pathArray.length-1])}}),$(self).attr("data-styled",!0)}})}}(jQuery),function($){$.fn.autogrow=function(opts){function resize(e){var clone,box=$(this),oldHeight=box.innerHeight(),newHeight=this.scrollHeight,minHeight=box.data("autogrow-start-height")||0;if(newHeight>oldHeight)this.scrollTop=0,opts.animate?box.stop().animate({height:newHeight},opts.speed):box.innerHeight(newHeight);else if(!e||8==e.which||46==e.which||e.ctrlKey&&88==e.which)if(oldHeight>minHeight){clone=box.clone().addClass(opts.cloneClass).css({position:"absolute",zIndex:-10,height:""}).val(box.val()),box.after(clone);do newHeight=clone[0].scrollHeight-1,clone.innerHeight(newHeight);while(newHeight===clone[0].scrollHeight);newHeight++,clone.remove(),box.focus(),minHeight>newHeight&&(newHeight=minHeight),oldHeight>newHeight&&opts.animate?box.stop().animate({height:newHeight},opts.speed):box.innerHeight(newHeight)}else box.innerHeight(minHeight)}var that=$(this).css({overflow:"hidden",resize:"none"}),selector=that.selector,defaults={context:$(document),animate:!0,speed:200,fixMinHeight:!0,cloneClass:"autogrowclone",onInitialize:!1};return opts=$.isPlainObject(opts)?opts:{context:opts?opts:$(document)},opts=$.extend({},defaults,opts),that.each(function(i,elem){var min,clone;elem=$(elem),elem.is(":visible")||parseInt(elem.css("height"),10)>0?min=parseInt(elem.css("height"),10)||elem.innerHeight():(clone=elem.clone().addClass(opts.cloneClass).val(elem.val()).css({position:"absolute",visibility:"hidden",display:"block"}),$("body").append(clone),min=clone.innerHeight(),clone.remove()),opts.fixMinHeight&&elem.data("autogrow-start-height",min),elem.css("height",min),opts.onInitialize&&resize.call(elem)}),opts.context.on("keyup paste",selector,resize),that}}(jQuery),function(){var initializing=!1;window.JQClass=function(){},JQClass.classes={},JQClass.extend=function extender(prop){function JQClass(){!initializing&&this._init&&this._init.apply(this,arguments)}var base=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof base[name]?function(name,fn){return function(){var __super=this._super;this._super=function(args){return base[name].apply(this,args||[])};var ret=fn.apply(this,arguments);return this._super=__super,ret}}(name,prop[name]):prop[name];return JQClass.prototype=prototype,JQClass.prototype.constructor=JQClass,JQClass.extend=extender,JQClass}}(),function($){function camelCase(name){return name.replace(/-([a-z])/g,function(match,group){return group.toUpperCase()})}JQClass.classes.JQPlugin=JQClass.extend({name:"plugin",defaultOptions:{},regionalOptions:{},_getters:[],_getMarker:function(){return"is-"+this.name},_init:function(){$.extend(this.defaultOptions,this.regionalOptions&&this.regionalOptions[""]||{});var jqName=camelCase(this.name);$[jqName]=this,$.fn[jqName]=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);return $[jqName]._isNotChained(options,otherArgs)?$[jqName][options].apply($[jqName],[this[0]].concat(otherArgs)):this.each(function(){if("string"==typeof options){if("_"===options[0]||!$[jqName][options])throw"Unknown method: "+options;$[jqName][options].apply($[jqName],[this].concat(otherArgs))}else $[jqName]._attach(this,options)})}},setDefaults:function(options){$.extend(this.defaultOptions,options||{})},_isNotChained:function(name,otherArgs){return"option"===name&&(0===otherArgs.length||1===otherArgs.length&&"string"==typeof otherArgs[0])?!0:$.inArray(name,this._getters)>-1},_attach:function(elem,options){if(elem=$(elem),!elem.hasClass(this._getMarker())){elem.addClass(this._getMarker()),options=$.extend({},this.defaultOptions,this._getMetadata(elem),options||{});var inst=$.extend({name:this.name,elem:elem,options:options},this._instSettings(elem,options));elem.data(this.name,inst),this._postAttach(elem,inst),this.option(elem,options)}},_instSettings:function(elem,options){return{}},_postAttach:function(elem,inst){},_getMetadata:function(elem){try{var data=elem.data(this.name.toLowerCase())||"";data=data.replace(/'/g,'"'),data=data.replace(/([a-zA-Z0-9]+):/g,function(match,group,i){var count=data.substring(0,i).match(/"/g);return count&&count.length%2!==0?group+":":'"'+group+'":'}),data=$.parseJSON("{"+data+"}");for(var name in data){var value=data[name];"string"==typeof value&&value.match(/^new Date\((.*)\)$/)&&(data[name]=eval(value))}return data}catch(e){return{}}},_getInst:function(elem){return $(elem).data(this.name)||{}},option:function(elem,name,value){elem=$(elem);var inst=elem.data(this.name);if(!name||"string"==typeof name&&null==value){var options=(inst||{}).options;return options&&name?options[name]:options}if(elem.hasClass(this._getMarker())){var options=name||{};"string"==typeof name&&(options={},options[name]=value),this._optionsChanged(elem,inst,options),$.extend(inst.options,options)}},_optionsChanged:function(elem,inst,options){},destroy:function(elem){elem=$(elem),elem.hasClass(this._getMarker())&&(this._preDestroy(elem,this._getInst(elem)),elem.removeData(this.name).removeClass(this._getMarker()))},_preDestroy:function(elem,inst){}}),$.JQPlugin={createPlugin:function(superClass,overrides){"object"==typeof superClass&&(overrides=superClass,superClass="JQPlugin"),superClass=camelCase(superClass);var className=camelCase(overrides.name);JQClass.classes[className]=JQClass.classes[superClass].extend(overrides),new JQClass.classes[className]}}}(jQuery),function($){var pluginName="maxlength";$.JQPlugin.createPlugin({name:pluginName,defaultOptions:{max:200,truncate:!0,showFeedback:!0,feedbackTarget:null,onFull:null},regionalOptions:{"":{feedbackText:"{r} characters remaining ({m} maximum)",overflowText:"{o} characters too many ({m} maximum)"}},_getters:["curLength"],_feedbackClass:pluginName+"-feedback",_fullClass:pluginName+"-full",_overflowClass:pluginName+"-overflow",_disabledClass:pluginName+"-disabled",_instSettings:function(elem,options){return{feedbackTarget:$([])}},_postAttach:function(elem,inst){elem.on("keypress."+inst.name,function(event){if(!inst.options.truncate)return!0;var ch=String.fromCharCode(void 0==event.charCode?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||"\x00"==ch||$(this).val().length<inst.options.max}).on("keyup."+inst.name,function(){$.maxlength._checkLength(elem)})},_optionsChanged:function(elem,inst,options){$.extend(inst.options,options),inst.feedbackTarget.length>0&&(inst.hadFeedbackTarget?inst.feedbackTarget.empty().val("").removeClass(this._feedbackClass+" "+this._fullClass+" "+this._overflowClass):inst.feedbackTarget.remove(),inst.feedbackTarget=$([])),inst.options.showFeedback&&(inst.hadFeedbackTarget=!!inst.options.feedbackTarget,$.isFunction(inst.options.feedbackTarget)?inst.feedbackTarget=inst.options.feedbackTarget.apply(elem[0],[]):inst.options.feedbackTarget?inst.feedbackTarget=$(inst.options.feedbackTarget):inst.feedbackTarget=$("<span></span>").insertAfter(elem),inst.feedbackTarget.addClass(this._feedbackClass)),elem.off("mouseover."+inst.name+" focus."+inst.name+"mouseout."+inst.name+" blur."+inst.name),"active"==inst.options.showFeedback&&(elem.on("mouseover."+inst.name,function(){inst.feedbackTarget.css("visibility","visible")}).on("mouseout."+inst.name,function(){inst.focussed||inst.feedbackTarget.css("visibility","hidden")}).on("focus."+inst.name,function(){inst.focussed=!0,inst.feedbackTarget.css("visibility","visible")}).on("blur."+inst.name,function(){inst.focussed=!1,inst.feedbackTarget.css("visibility","hidden")}),inst.feedbackTarget.css("visibility","hidden")),this._checkLength(elem)},curLength:function(elem){var inst=this._getInst(elem),value=elem.val(),len=value.replace(/\r\n/g,"~~").replace(/\n/g,"~~").length;return{used:len,remaining:inst.options.max-len}},_checkLength:function(elem){var inst=this._getInst(elem),value=elem.val(),len=value.replace(/\r\n/g,"~~").replace(/\n/g,"~~").length;if(elem.toggleClass(this._fullClass,len>=inst.options.max).toggleClass(this._overflowClass,len>inst.options.max),len>inst.options.max&&inst.options.truncate){var lines=elem.val().split(/\r\n|\n/);value="";for(var i=0;value.length<inst.options.max&&i<lines.length;)value+=lines[i].substring(0,inst.options.max-value.length)+"\r\n",i++;elem.val(value.substring(0,inst.options.max)),elem[0].scrollTop=elem[0].scrollHeight,len=inst.options.max}inst.feedbackTarget.toggleClass(this._fullClass,len>=inst.options.max).toggleClass(this._overflowClass,len>inst.options.max);var feedback=(len>inst.options.max?inst.options.overflowText:inst.options.feedbackText).replace(/\{c\}/,len).replace(/\{m\}/,inst.options.max).replace(/\{r\}/,inst.options.max-len).replace(/\{o\}/,len-inst.options.max);try{inst.feedbackTarget.text(feedback)}catch(e){}try{inst.feedbackTarget.val(feedback)}catch(e){}len>=inst.options.max&&$.isFunction(inst.options.onFull)&&inst.options.onFull.apply(elem,[len>inst.options.max])},enable:function(elem){if(elem=$(elem),elem.hasClass(this._getMarker())){var inst=this._getInst(elem);elem.prop("disabled",!1).removeClass(inst.name+"-disabled"),inst.feedbackTarget.removeClass(inst.name+"-disabled")}},disable:function(elem){if(elem=$(elem),elem.hasClass(this._getMarker())){var inst=this._getInst(elem);elem.prop("disabled",!0).addClass(inst.name+"-disabled"),inst.feedbackTarget.addClass(inst.name+"-disabled")}},_preDestroy:function(elem,inst){inst.feedbackTarget.length>0&&(inst.hadFeedbackTarget?inst.feedbackTarget.empty().val("").css("visibility","visible").removeClass(this._feedbackClass+" "+this._fullClass+" "+this._overflowClass):inst.feedbackTarget.remove()),elem.removeClass(this._fullClass+" "+this._overflowClass).off("."+inst.name)}})}(jQuery),$(function(){$(".comment-form textarea").autogrow({animate:!1}),$(".comment-form input[type=file]").nicefileinput(),$("#shoutbox-comment").maxlength({max:255,feedbackTarget:"#remain",feedbackText:"{r} characters remaining"})}),!function($,window,document){"use strict";function Linkified(element,options){this._defaults=defaults,this.element=element,this.setOptions(options),this.init()}var defaults={tagName:"a",newLine:"\n",target:"_blank",linkClass:null,linkClasses:[],linkAttributes:null};Linkified.prototype={constructor:Linkified,init:function(){1===this.element.nodeType?Linkified.linkifyNode.call(this,this.element):this.element=Linkified.linkify.call(this,this.element.toString())},setOptions:function(options){this.settings=Linkified.extendSettings(options,this.settings)},toString:function(){return this.element.toString()}},Linkified.extendSettings=function(options,settings){var prop;settings=settings||{};for(prop in defaults)settings[prop]||(settings[prop]=defaults[prop]);for(prop in options)settings[prop]=options[prop];return settings},Linkified.linkMatch=new RegExp(["(",'\\s|[^a-zA-Z0-9.\\+_\\/"\\>\\-]|^',")(?:","(","[a-zA-Z0-9\\+_\\-]+","(?:","\\.[a-zA-Z0-9\\+_\\-]+",")*@",")?(","http:\\/\\/|https:\\/\\/|ftp:\\/\\/",")?(","(?:(?:[a-z0-9][a-z0-9_%\\-_+]*\\.)+)",")(","(?:com|ca|co|edu|gov|net|org|dev|biz|cat|int|pro|tel|mil|aero|asia|coop|info|jobs|mobi|museum|name|post|travel|local|[a-z]{2})",")(","(?::\\d{1,5})",")?(","(?:","[\\/|\\?]","(?:","[\\-a-zA-Z0-9_%#*&+=~!?,;:.\\/]*",")*",")","[\\-\\/a-zA-Z0-9_%#*&+=~]","|","\\/?",")?",")(",'[^a-zA-Z0-9\\+_\\/"\\<\\-]|$',")"].join(""),"g"),Linkified.emailLinkMatch=/(<[a-z]+ href=\")(http:\/\/)([a-zA-Z0-9\+_\-]+(?:\.[a-zA-Z0-9\+_\-]+)*@)/g,Linkified.linkify=function(text,options){var attr,settings,linkClasses,linkReplace=[];this.constructor===Linkified&&this.settings?(settings=this.settings,options&&(settings=Linkified.extendSettings(options,settings))):settings=Linkified.extendSettings(options),linkClasses=settings.linkClass?settings.linkClass.split(/\s+/):[],linkClasses.push.apply(linkClasses,settings.linkClasses),text=text.replace(/</g,"&lt;").replace(/(\s)/g,"$1$1"),linkReplace.push("$1<"+settings.tagName,'href="http://$2$4$5$6$7"'),linkReplace.push('class="linkified'+(linkClasses.length>0?" "+linkClasses.join(" "):"")+'"'),settings.target&&linkReplace.push('target="'+settings.target+'"');for(attr in settings.linkAttributes)linkReplace.push([attr,'="',settings.linkAttributes[attr].replace(/\"/g,"&quot;").replace(/\$/g,"&#36;"),'"'].join(""));return linkReplace.push(">$2$3$4$5$6$7</"+settings.tagName+">$8"),text=text.replace(Linkified.linkMatch,linkReplace.join(" ")),text=text.replace(Linkified.emailLinkMatch,"$1mailto:$3"),text=text.replace(/(\s){2}/g,"$1"),text=text.replace(/\n/g,settings.newLine)},Linkified.linkifyNode=function(node){var children,childNode,childCount,dummyElement,i;if(node&&"object"==typeof node&&1===node.nodeType&&"a"!==node.tagName.toLowerCase()&&!/[^\s]linkified[\s$]/.test(node.className)){for(children=[],dummyElement=Linkified._dummyElement||document.createElement("div"),childNode=node.firstChild,childCount=node.childElementCount;childNode;){if(3===childNode.nodeType){for(;dummyElement.firstChild;)dummyElement.removeChild(dummyElement.firstChild);for(dummyElement.innerHTML=Linkified.linkify.call(this,childNode.textContent||childNode.innerText||childNode.nodeValue),children.push.apply(children,dummyElement.childNodes);dummyElement.firstChild;)dummyElement.removeChild(dummyElement.firstChild)}else children.push(1===childNode.nodeType?Linkified.linkifyNode.call(this,childNode):childNode);childNode=childNode.nextSibling}for(;node.firstChild;)node.removeChild(node.firstChild);for(i=0;i<children.length;i++)node.appendChild(children[i])}return node},Linkified._dummyElement=document.createElement("div"),$.fn.linkify=function(options){return this.each(function(){var linkified;(linkified=$.data(this,"plugin-linkify"))?(linkified.setOptions(options),linkified.init()):$.data(this,"plugin-linkify",new Linkified(this,options))})},$.fn.linkify.Constructor=Linkified,$(window).on("load",function(){$("[data-linkify]").each(function(){var $target,$this=$(this),target=$this.attr("data-linkify"),options={tagName:$this.attr("data-linkify-tagname"),newLine:$this.attr("data-linkify-newline"),target:$this.attr("data-linkify-target"),linkClass:$this.attr("data-linkify-linkclass")};for(var option in options)"undefined"==typeof options[option]&&delete options[option];$target="this"===target?$this:$this.find(target),$target.linkify(options)})}),$("body").on("click",".linkified",function(){var $link=$(this),url=$link.attr("href"),isEmail=/^mailto:/i.test(url),target=$link.attr("target");return isEmail?window.location.href=url:window.open(url,target),!1})}(jQuery,window,document),!function($,window,document){"use strict";var mentionRegex="/\b(@(S+))/g";$.fn.urlToLink=function(options){return options=$.extend({},$.fn.urlToLink.defaults,options),this.each(function(){$(this).html($(this).html().replace(mentionRegex,function(match,contents,offset,s){var href=match,linkText="",rel="";return options.removeHttp&&(href=href.replace("@","")),linkText=href,' <a href="'+match+'" title="'+match+'" target="'+options.target+'" rel="'+rel+'">'+linkText+"</a>"}))})},$.fn.urlToLink.defaults={target:"_self"}}(jQuery,window,document),!function($){"use strict";var Typeahead=function(element,options){this.$element=$(element),this.options=$.extend({},$.fn.typeahead.defaults,options),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=$(this.options.menu),this.shown=!1,this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(val)).change(),this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:pos.top+pos.height,left:pos.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(event){var items;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,items?this.process(items):this)},process:function(items){var that=this;return items=$.grep(items,function(item){return that.matcher(item)}),items=this.sorter(items),items.length?this.render(items.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){for(var item,beginswith=[],caseSensitive=[],caseInsensitive=[];item=items.shift();)item.toLowerCase().indexOf(this.query.toLowerCase())?~item.indexOf(this.query)?caseSensitive.push(item):caseInsensitive.push(item):beginswith.push(item);return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"})},render:function(items){var that=this;return items=$(items).map(function(i,item){return i=$(that.options.item).attr("data-value",item),i.find("a").html(that.highlighter(item)),i[0]}),items.first().addClass("active"),this.$menu.html(items),this},next:function(event){var active=this.$menu.find(".active").removeClass("active"),next=active.next();next.length||(next=$(this.$menu.find("li")[0])),next.addClass("active")},prev:function(event){var active=this.$menu.find(".active").removeClass("active"),prev=active.prev();prev.length||(prev=this.$menu.find("li").last()),prev.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this))},eventSupported:function(eventName){var isSupported=eventName in this.$element;return isSupported||(this.$element.setAttribute(eventName,"return;"),isSupported="function"==typeof this.$element[eventName]),isSupported},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~$.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(e.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var old=$.fn.typeahead;$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options="object"==typeof option&&option;data||$this.data("typeahead",data=new Typeahead(this,options)),"string"==typeof option&&data[option]()})},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="mentions dropdown dropdown-menu"></ul>',item:'<li class="mention-item"><a href="#"></a></li>',minLength:1},$.fn.typeahead.Constructor=Typeahead,$.fn.typeahead.noConflict=function(){return $.fn.typeahead=old,this},$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var $this=$(this);$this.data("typeahead")||$this.typeahead($this.data())})}(window.jQuery),function($){var defaults={container:".urlive-container",target:"_blank",imageSize:"auto",render:!0,disableClick:!1,regexp:/((https?:\/\/)?[\w-@]+(\.[a-z]+)+\.?(:\d+)?(\/\S*)?)/i,yqlSelect:"*",callbacks:{onStart:function(){},onSuccess:function(){},onFail:function(){},noData:function(){},onLoadEnd:function(){},imgError:function(){},onClick:function(){}}},xajax=function(ajax){var exRegex=RegExp(window.location.protocol+"//"+window.location.hostname),yql_base_uri="http"+(/^https/.test(window.location.protocol)?"s":"")+"://query.yahooapis.com/v1/public/yql?callback=?",yql_query='select {SELECT} from html where url="{URL}" and xpath="*" and compat="html5"';return function(o){var url=/^https?:\/\//i.test(o.url)?o.url:window.location.protocol+"//"+o.url;return/get/i.test(o.type)&&!/json/i.test(o.dataType)&&!exRegex.test(url)&&/:\/\//.test(url)&&(o.url=yql_base_uri,o.dataType="json",o.data={q:yql_query.replace("{SELECT}",o.yqlSelect).replace("{URL}",url+(o.data?(/\?/.test(url)?"&":"?")+$.param(o.data):"")),format:"xml"},!o.success&&o.complete&&(o.success=o.complete,delete o.complete),o.success=function(success){return function(data){success&&success.call(this,{responseText:(data.results[0]||"").replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,"")},"success")}}(o.success)),ajax.apply(this,arguments)}}($.ajax),findUrlive=function(){var selector=$(this).data("urlive-container")||$(this);return $(selector).find(".urlive-link")},methods={init:function(options){var opts=$.extend(!0,defaults,options);return this.each(function(){function getData(url){xajax({url:url,type:"GET",yqlSelect:opts.yqlSelect,beforeSend:opts.callbacks.onStart}).done(function(data){$.isEmptyObject(data.results)?(opts.callbacks.noData(),$.error("YQL request succeeded but with empty results",data)):(data=data.results[0],html=$("<div/>",{html:data}),get=function(prop){return html.find('[property="'+prop+'"]').attr("content")||html.find('[name="'+prop+'"]').attr("content")||html.find(prop).html()||html.find(prop).attr("src")},set={image:el.data("image")||get("og:image")||get("img"),title:el.data("title")||get("og:title")||get("title"),description:el.data("description")||get("og:description")||get("description"),url:el.data("url")||get("og:url")||url,type:el.data("type")||get("og:type"),sitename:el.data("site_name")||get("og:site_name")},opts.callbacks.onSuccess(set),opts.render&&draw(set))}).fail(function(jqXHR,textStatus,errorThrown){opts.callbacks.onFail(),$.error("YQL request error: ",textStatus,errorThrown)})}function draw(set){outer=$("<a/>",{"class":"urlive-link",href:set.url,target:opts.target}),imgWrapper=$("<div/>",{"class":"urlive-img-wrapper"}),textWrapper=$("<div/>",{"class":"urlive-text-wrapper"}),$.each(set,function(key,val){val&&("image"==key?(/^(?:[a-z]+:)?\/\//i.test(val)||(val=/^https?:\/\//i.test(set.url)?set.url+val:window.location.protocol+"//"+set.url+val),img=$("<img/>",{src:val}),img.error(opts.callbacks.imgError),img.appendTo(imgWrapper),img.hide().load(function(){var imgW=$(this).width(),outer=$(this).closest(".urlive-link");$(this).addClass("urlive-"+key).show(),"auto"==opts.imageSize?imgW>=outer.width()?outer.addClass("urlive-img-large"):outer.addClass("urlive-img-small"):"large"==opts.imageSize?outer.addClass("urlive-img-large"):"small"==opts.imageSize&&outer.addClass("urlive-img-small"),opts.callbacks.onLoadEnd()})):(elem=$("<span/>",{"class":"urlive-"+key,text:val}),elem.appendTo(textWrapper)))}),outer.append(imgWrapper,textWrapper).appendTo(el.data("urlive-container")),outer.on("click",opts.callbacks.onClick),opts.disableClick&&outer.on("click",function(e){e.preventDefault()})}var el=$(this),url=void 0;if(el.data("urlive-container",opts.container),el.is("a"))url=el.attr("href");else{var text=el.val()||el.text(),regexp=opts.regexp,email=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;url=regexp.exec(text),url=url&&!email.test(url[0])?url[0]:null}if(url)if(/\.(?:jpe?g|gif|png)/.test(url)){var ti=url.substr(url.lastIndexOf("/")+1);draw({image:url,title:ti,url:url})}else getData(url)})},close:function(duration){var urlive=findUrlive.apply(this);urlive.fadeOut(duration)},remove:function(duration){var urlive=findUrlive.apply(this);duration?urlive.fadeOut(duration,function(){urlive.remove()}):urlive.remove()},open:function(duration){var urlive=findUrlive.apply(this);urlive.fadeIn(duration)},disable:function(){var urlive=findUrlive.apply(this);urlive.on("click",function(e){e.preventDefault()})},enable:function(){var urlive=findUrlive.apply(this);urlive.off("click")}};$.fn.urlive=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error('Method "'+method+'" does not exist on jquery.urlive'):methods.init.apply(this,arguments)}}(jQuery),function($){$.fn.extend({mention:function(options){this.opts={users:[],delimiter:"@",sensitive:!0,emptyQuery:!1,queryBy:["name","username","location"],typeaheadOpts:{}};var settings=$.extend({},this.opts,options),_checkDependencies=function(){if("undefined"==typeof $)throw new Error("jQuery is Required");if("undefined"==typeof $.fn.typeahead)throw new Error("Typeahead is Required");return!0},_extractCurrentQuery=function(query,caratPos){var i;for(i=caratPos;i>=0&&query[i]!=settings.delimiter;i--);return query.substring(i,caratPos)},_matcher=function(itemProps){var i;if(settings.emptyQuery){var q=this.query.toLowerCase(),caratPos=this.$element[0].selectionStart,lastChar=q.slice(caratPos-1,caratPos);if(lastChar==settings.delimiter)return!0}for(i in settings.queryBy)if(itemProps[settings.queryBy[i]]){var j,item=itemProps[settings.queryBy[i]].toLowerCase(),usernames=this.query.toLowerCase().match(new RegExp(settings.delimiter+"\\w+","g"));if(usernames)for(j=0;j<usernames.length;j++){var username=usernames[j].substring(1).toLowerCase(),re=new RegExp(settings.delimiter+item,"g"),used=this.query.toLowerCase().match(re);if(-1!=item.indexOf(username)&&null===used)return!0}}},_updater=function(item){var i,data=this.query,caratPos=this.$element[0].selectionStart;for(i=caratPos;i>=0&&data[i]!=settings.delimiter;i--);var textBefore=(data.substring(i,caratPos),data.substring(0,i)),textAfter=data.substring(caratPos),data=textBefore+settings.delimiter+item+textAfter;return this.tempQuery=data,data},_sorter=function(items){if(items.length&&settings.sensitive){var i,currentUser=_extractCurrentQuery(this.query,this.$element[0].selectionStart).substring(1),len=items.length,priorities={highest:[],high:[],med:[],low:[]},finals=[];if(1==currentUser.length){for(i=0;len>i;i++){var currentRes=items[i];currentRes.username[0]==currentUser?priorities.highest.push(currentRes):currentRes.username[0].toLowerCase()==currentUser.toLowerCase()?priorities.high.push(currentRes):-1!=currentRes.username.indexOf(currentUser)?priorities.med.push(currentRes):priorities.low.push(currentRes)}for(i in priorities){var j;for(j in priorities[i])finals.push(priorities[i][j])}return finals}}return items},_render=function(items){var that=this;return items=$(items).map(function(i,item){i=$(that.options.item).attr("data-value",item.username);var _linkHtml=$("<div />");return item.image&&_linkHtml.append('<img class="mention_image" src="'+item.image+'">'),item.name&&_linkHtml.append('<span class="mention_name">'+item.name+"</span>"),item.username&&_linkHtml.append('<span class="mention_username"> ('+item.username+")</span>"),item.location&&_linkHtml.append('<div class="mention_location"> '+item.location+"</div>"),i.find("a").html(that.highlighter(_linkHtml.html())),i[0]}),items.first().addClass("active"),this.$menu.html(items),this};return $.fn.typeahead.Constructor.prototype.render=_render,this.each(function(){var _this=$(this);_checkDependencies()&&_this.typeahead($.extend({source:settings.users,matcher:_matcher,updater:_updater,sorter:_sorter},settings.typeaheadOpts))})}})}(jQuery),$(function(){function readURL(input){if(input.files&&input.files[0]){var reader=new FileReader;reader.onload=function(e){$("#preview-image").attr("src",e.target.result).removeClass("element-hidden"),$("#remove-image").removeClass("element-hidden"),$(".preview-wrapper").css("display","inline-block"),$(".form-comment-submit").removeClass("disabled")},reader.readAsDataURL(input.files[0])}}$("#remove-image").on("click",function(e){return e.preventDefault(),$("#preview-image").attr("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),$(".preview-wrapper").removeAttr("style"),$(this).addClass("element-hidden"),!1}),$(".form-comment-file").change(function(){readURL(this)}),$(".block-comments .form-comment-submit").click(function(e){var posttext=$(".form-comment-message textarea").val(),shoutImage=$(".comment-form-holder .preview-wrapper").html(),richLink=$(".comment-form-holder #linkinfo").html(),postmarkup="<div class='avatar-holder media-figure'>";postmarkup+="<a href='./profile.html' title='View user profile'>",postmarkup+="<img alt='Grace O'Flynn' class='lazyload' data-srcset='/photos/60/people7.jpg 1x, /photos/120/people8.jpg 2x' src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='>",postmarkup+="<noscript>",postmarkup+="<img alt='Grace O'Flynn' src='/photos/60/people7.jpg' srcset='/photos/60/people7.jpg 1x, /photos/120/people8.jpg 2x'>",postmarkup+="    </noscript>",postmarkup+="  </a>",postmarkup+="</div>",postmarkup+="<div class='comment-holder media-body'>",postmarkup+="  <div class='comment-head'>",postmarkup+="    <a class='comment-author' href='./my-profile.html' title='View profile'>",postmarkup+="      Grace O'Flynn",postmarkup+="    </a>",postmarkup+="  </div>",postmarkup+="  <div class='comment-body'>",postmarkup+=posttext,0!=$(shoutImage).length&&(postmarkup+=shoutImage),0!=$(richLink).length&&(postmarkup+=richLink),postmarkup+="  </div>",postmarkup+="  <div class='comment-footer'>",postmarkup+="    <span class='comment-timestamp'>now</span>",postmarkup+="    <span class='comment-actions'>",postmarkup+="      <a class='comment-actionlink modal-inline' href='#reply-comment'>reply</a>",postmarkup+="      <a class='comment-actionlink modal-inline' href='#edit-comment'>edit</a>",postmarkup+="      <a class='comment-actionlink modal-inline' href='#delete-comment'>delete</a>",postmarkup+="    </span>",postmarkup+="  </div>",postmarkup+="</div>",$("<article class='comment media'>").html(postmarkup).prependTo(".comments"),$(".form-comment-message textarea").val(""),$(".form-comment-submit").addClass("disabled"),$(".comment-form-holder #linkinfo").remove(),$(".comment-form-holder #preview-image").addClass("element-hidden"),e.preventDefault(),$(".comment-body").linkify().urlToLink()}),$("#reply-comment .form-comment-submit").click(function(e){e.preventDefault(),$.magnificPopup.close(),$('<div class="form-sent form-success"><i class="icon icon-chat"></i> <p>Your reply has been posted.</p></div>').insertBefore(".l-main").show().delay(5e3).fadeOut("slow")}),$(".form-comment-message textarea").keyup(function(){var postLength=$(".form-comment-message textarea").val().length,charactersLeft=255-postLength;0>charactersLeft?$(".form-comment-submit").addClass("disabled"):255==charactersLeft?$(".form-comment-submit").addClass("disabled"):$(".form-comment-submit").removeClass("disabled")}),$(".comment-form .form-comment-submit").addClass("disabled"),$(".show-linkinfo").click(function(e){$("#shoutbox-comment-link").urlive({container:"#linkinfo",imageSize:"small",callbacks:{onStart:function(){$("#shoutbox-comment-link").addClass("throbbing"),$(".show-linkinfo").html("loading ..."),
$(".urlive-container").urlive("remove"),$("#linkinfo p").remove(),$(".close-linkinfo").addClass("element-hidden")},onSuccess:function(){$("#linkinfo").show()},onFail:function(){$("#linkinfo").show().prepend("<p>Cannot find a website here...</p>"),$(".show-linkinfo").html("Check link")},noData:function(){$("#linkinfo").show().prepend("<p>Cannot find a website here...</p>"),$("#shoutbox-comment-link").removeClass("throbbing"),$(".show-linkinfo").html("Check link")},onLoadEnd:function(){$("#shoutbox-comment-link").removeClass("throbbing"),$(".close-linkinfo").removeClass("element-hidden"),$(".show-linkinfo").html("Check link"),$(".btn-primary").prop("disabled",!1),$(".urlive-img-wrapper").append('<a href="#" class="remove-image"></a>'),$(".remove-image").click(function(e){$(".urlive-img-wrapper").remove(),e.preventDefault()})}}}),e.preventDefault()}),$(".close-linkinfo").click(function(e){$("#shoutbox-comment-link").urlive("remove",400),$(this).addClass("element-hidden"),$("#linkinfo").hide(),e.preventDefault()}),$(".form-addlink .btn-primary").click(function(e){$(".comment-form-holder .urlive-container").length&&$(".comment-form-holder .urlive-container").remove();var linkclone=$(".urlive-container").clone().wrapInner('<div class="linkclone"></div>');linkclone.insertAfter(".block-comments .form-comment-message"),$(".form-comment-submit").removeClass("disabled"),$.magnificPopup.close(),e.preventDefault(),$(".linkclone .remove-image").click(function(e){$(".linkclone .urlive-img-wrapper").remove(),e.preventDefault()}),$(".linkclone .close-linkinfo").click(function(e){$(this).closest(".urlive-container").remove(),e.preventDefault()})}),$(".block-comments .form-comment-submit").click(function(event){event.preventDefault(),$("html, body").animate({scrollTop:0},300),$('<div class="absolute_message"><div class="form-sent form-success"> <p>Your comment has been posted.</p></div></div>').insertBefore(".l-main").hide().slideDown("slow").delay(6e3).slideUp(),$(".remove-image").addClass("element-hidden"),$(".comment-body .remove-image, .comment-body .close-linkinfo").remove()})}),$(function(){$("#shoutbox-comment").mention({users:[{name:"Lindsay Made Lindsay Made Lindsay Made",username:"LindsayMLindsayMLindsayM",image:"http://placeimg.com/34/34/people/1",location:"Amsterdam"},{name:"Rob Dyrdek",username:"robdyrdek",image:"http://placeimg.com/34/34/people/2",location:"London"},{name:"Rick Bahner",username:"RickyBahner",image:"http://placeimg.com/34/34/people/3",location:"Berlin"},{name:"Jacob Kelley",username:"jakiestfu",image:"http://placeimg.com/34/34/people/4",location:"Shanghai"},{name:"John Doe",username:"HackMurphy",image:"http://placeimg.com/34/34/people/5",location:"Rome"},{name:"Charlie Edmiston",username:"charlie",image:"http://placeimg.com/34/34/people/6",location:"Paris"},{name:"Andrea Montoya",username:"andream",image:"http://placeimg.com/34/34/people/7",location:"New York"},{name:"Jenna Talbert",username:"calisunshine",image:"http://placeimg.com/34/34/people/8",location:"Mexico city"},{name:"Street League",username:"streetleague",image:"http://placeimg.com/34/34/people/9",location:"Athens"},{name:"Loud Mouth Burrito",username:"Loudmouthfoods",image:"http://placeimg.com/34/34/people/10",location:"Cape Town"}]})});