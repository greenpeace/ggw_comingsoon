"use strict";!function($){var dragging,draggingHeight,placeholders=$();$.fn.sortable=function(options){var method=String(options);return options=$.extend({connectWith:!1,placeholder:null,dragImage:null},options),this.each(function(){var index,items=$(this).children(options.items),handles=options.handle?items.find(options.handle):items;if("reload"===method&&$(this).children(options.items).off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"),/^enable|disable|destroy$/.test(method)){var citems=$(this).children($(this).data("items")).attr("draggable","enable"===method);return void("destroy"===method&&($(this).off("sortupdate"),$(this).removeData("opts"),citems.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s dragover.h5s dragenter.h5s drop.h5s").off("sortupdate"),handles.off("selectstart.h5s")))}var soptions=$(this).data("opts");"undefined"==typeof soptions?$(this).data("opts",options):options=soptions;var startParent,newParent,placeholder=null===options.placeholder?$("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder"/>'):$(options.placeholder).addClass("sortable-placeholder");$(this).data("items",options.items),placeholders=placeholders.add(placeholder),options.connectWith&&$(options.connectWith).add(this).data("connectWith",options.connectWith),items.attr("role","option"),items.attr("aria-grabbed","false"),handles.attr("draggable","true").not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end(),items.on("dragstart.h5s",function(e){var dt=e.originalEvent.dataTransfer;dt.effectAllowed="move",dt.setData("text",""),options.dragImage&&dt.setDragImage&&dt.setDragImage(options.dragImage,0,0),index=(dragging=$(this)).addClass("sortable-dragging").attr("aria-grabbed","true").index(),draggingHeight=dragging.outerHeight(),startParent=$(this).parent(),dragging.parent().triggerHandler("sortstart",{item:dragging,startparent:startParent})}).on("dragend.h5s",function(){dragging&&(dragging.removeClass("sortable-dragging").attr("aria-grabbed","false").show(),placeholders.detach(),newParent=$(this).parent(),(index!==dragging.index()||startParent.get(0)!==newParent.get(0))&&dragging.parent().triggerHandler("sortupdate",{item:dragging,oldindex:index,startparent:startParent,endparent:newParent}),dragging=null,draggingHeight=null)}).add([this,placeholder]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){if(!items.is(dragging)&&options.connectWith!==$(dragging).parent().data("connectWith"))return!0;if("drop"===e.type)return e.stopPropagation(),placeholders.filter(":visible").after(dragging),dragging.trigger("dragend.h5s"),!1;if(e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",items.is(this)){var thisHeight=$(this).outerHeight();if(options.forcePlaceholderSize&&placeholder.height(draggingHeight),thisHeight>draggingHeight){var deadZone=thisHeight-draggingHeight,offsetTop=$(this).offset().top;if(placeholder.index()<$(this).index()&&e.originalEvent.pageY<offsetTop+deadZone)return!1;if(placeholder.index()>$(this).index()&&e.originalEvent.pageY>offsetTop+thisHeight-deadZone)return!1}dragging.hide(),$(this)[placeholder.index()<$(this).index()?"after":"before"](placeholder),placeholders.not(placeholder).detach()}else placeholders.is(this)||$(this).children(options.items).length||(placeholders.detach(),$(this).append(placeholder));return!1})})}}(jQuery),$(function(){function processURL(url){function processYouTube(id){if(!id)throw new Error("Unsupported YouTube URL");var image="http://img.youtube.com/vi/"+id+"/mqdefault.jpg";$(".media-figure").empty().prepend("<img src="+image+' + id="preview-image" />'),$("#mediainvalid").addClass("element-hidden")}var id;if(url.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/)){if(id=RegExp.$6,RegExp.$3.indexOf("youtu")>-1)return processYouTube(id);RegExp.$3.indexOf("vimeo")>-1&&$.ajax({url:"http://vimeo.com/api/v2/video/"+id+".json",jsonp:"callback",dataType:"jsonp",success:function(data){var image=data[0].thumbnail_large;$(".media-figure").empty().prepend("<img src="+image+" />"),$("#mediainvalid").addClass("element-hidden")},error:function(xhr,status,error){alert(error),$(".media-figure").empty()}})}else $(".media-figure").empty(),$("#mediainvalid").removeClass("element-hidden")}$("#selectmedia").focusout(function(){processURL(this.value),$(".preview-wrapper").css("background-color","#fff"),$("#remove-video").removeClass("element-invisible")}),$("#remove-video").on("click",function(e){return e.preventDefault(),$("#preview-image").attr("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),$(".preview-wrapper").removeAttr("style"),$("#selectmedia").val(""),$("#mediainvalid").addClass("element-hidden"),$(this).addClass("element-invisible"),!1})}),$(function(){function readURL(input){if(input.files&&input.files[0]){var reader=new FileReader;reader.onload=function(e){$("#preview-image").attr("src",e.target.result),$(".preview-wrapper").css("background-color","#fff"),$("#remove-image").removeClass("element-hidden")},reader.readAsDataURL(input.files[0])}}function confirmExit(){return 1==formmodified?"You have made changes to this content which is not saved. Scroll down to save. Do you wish to leave the page?":void 0}var counter=0;$(".clone-trigger").click(function(e){$(".clone-item").clone(!0).insertAfter(".clone-item").removeClass("clone-item").addClass("item"+counter).find("input").val(""),$(".item"+counter).append('<a href="#" class="button btn-s delete-clone"><i class="icon-trash"></i></a>'),counter++,e.preventDefault(),$(".delete-clone").click(function(e){$(this).parent().remove(),e.preventDefault()}),$(".field-event-roles-values").sortable({handle:".tabledrag-handle",items:":not(.disabled)"})}),$("#section-social .form-select").on("change",function(){var channel={fb:"http://www.facebook.com/username",tw:"http://www.twitter.com/username","in":"http://www.linkedin.com/username",pi:"http://www.pinterest.com/username",gp:"http://plus.google.com/username",vk:"http://www.vk.com/username"};$(this).closest(".row").find(".form-text").attr("placeholder",channel[$(this).val()])});var editableAddress=$("#edit-event-address, #edit-group-address");$(editableAddress).prop("disabled",!0),$(editableAddress).prop("placeholder","please select a country first..."),$("#country-select").on("change",function(){$(editableAddress).prop("disabled",!1),$(editableAddress).prop("placeholder","venue, street, city etc.")}),$("#section-localgroup, #section-skillsgroup").hide(),$('input:radio[name="field_group_type"]').change(function(){$(this).is(":checked")&&"4"==$(this).val()?($("#section-localgroup").show(),0!=$(".block .map").length&&map.invalidateSize()):$(this).is(":checked")&&"4"!=$(this).val()&&$("#section-localgroup").hide(),$(this).is(":checked")&&"5"==$(this).val()?$("#section-skillsgroup").show():$(this).is(":checked")&&"5"!=$(this).val()&&$("#section-skillsgroup").hide()}),$("#section-notifications .form-select").change(function(){"specify"==$(this).val()?$(this).closest(".form-wrapper").next(".collapsible-fieldset-wrapper").removeClass("element-hidden"):"specify"!=$(this).val()&&$(this).closest(".form-wrapper").next(".collapsible-fieldset-wrapper").addClass("element-hidden")}),$(".input-good").click(function(e){e.preventDefault(),e.stopPropagation();var target=$(this).data("target");(void 0!=target||null!=target)&&(window.location="./"+target)}),$(".input-false").one("click",function(e){e.preventDefault(),e.stopPropagation(),$(".help-block").removeClass("element-invisible"),$('<div class="absolute_message"><div class="form-sent form-error"> <p>You need to fill in the required fields.</p></div></div>').insertBefore(".l-main").hide().fadeIn("slow"),$(".has-error-hidden").removeClass("has-error-hidden").addClass("has-error"),$("html, body").animate({scrollTop:$(".absolute_message").offset().top-110},1e3),showErrorIcons()}),$(document).on("click",function(){$(".form-sent").fadeOut("slow")}),$(".launcher").on("click",function(e){e.preventDefault(),$("#uploadimage").click()}),$("#remove-image").on("click",function(e){return e.preventDefault(),$("#preview-image").attr("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),$(".preview-wrapper").removeAttr("style"),$("#file-name").addClass("element-hidden").removeClass("filename").html(""),$(this).addClass("element-hidden"),!1}),$("#uploadimage").change(function(){readURL(this),$("#file-name").removeClass("element-hidden").addClass("filename").html(this.files[0].name)});var formmodified=0;$("form *").change(function(){formmodified=1}),window.onbeforeunload=confirmExit,$(".input-good").click(function(){formmodified=0})}),+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.affix"),options="object"==typeof option&&option;data||$this.data("bs.affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})}var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options),this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this)),this.$element=$(element),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};Affix.VERSION="3.3.4",Affix.RESET="affix affix-top affix-bottom",Affix.DEFAULTS={offset:0,target:window},Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop(),position=this.$element.offset(),targetHeight=this.$target.height();if(null!=offsetTop&&"top"==this.affixed)return offsetTop>scrollTop?"top":!1;if("bottom"==this.affixed)return null!=offsetTop?scrollTop+this.unpin<=position.top?!1:"bottom":scrollHeight-offsetBottom>=scrollTop+targetHeight?!1:"bottom";var initializing=null==this.affixed,colliderTop=initializing?scrollTop:position.top,colliderHeight=initializing?targetHeight:height;return null!=offsetTop&&offsetTop>=scrollTop?"top":null!=offsetBottom&&colliderTop+colliderHeight>=scrollHeight-offsetBottom?"bottom":!1},Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$target.scrollTop(),position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop},Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)},Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var height=this.$element.height(),offset=this.options.offset,offsetTop=offset.top,offsetBottom=offset.bottom,scrollHeight=$(document.body).height();"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top(this.$element)),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom(this.$element));var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom);if(this.affixed!=affix){null!=this.unpin&&this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:""),e=$.Event(affixType+".bs.affix");if(this.$element.trigger(e),e.isDefaultPrevented())return;this.affixed=affix,this.unpin="bottom"==affix?this.getPinnedOffset():null,this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix","affixed")+".bs.affix")}"bottom"==affix&&this.$element.offset({top:scrollHeight-height-offsetBottom})}};var old=$.fn.affix;$.fn.affix=Plugin,$.fn.affix.Constructor=Affix,$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},null!=data.offsetBottom&&(data.offset.bottom=data.offsetBottom),null!=data.offsetTop&&(data.offset.top=data.offsetTop),Plugin.call($spy,data)})})}(jQuery),+function($){function ScrollSpy(element,options){this.$body=$(document.body),this.$scrollElement=$($(element).is(document.body)?window:element),this.options=$.extend({},ScrollSpy.DEFAULTS,options),this.selector=(this.options.target||"")+" .sf-navbtn",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",$.proxy(this.process,this)),this.refresh(),this.process()}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.scrollspy"),options="object"==typeof option&&option;data||$this.data("bs.scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()})}ScrollSpy.VERSION="3.3.4",ScrollSpy.DEFAULTS={offset:10},ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},ScrollSpy.prototype.refresh=function(){var that=this,offsetMethod="offset",offsetBase=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),$.isWindow(this.$scrollElement[0])||(offsetMethod="position",offsetBase=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+offsetBase,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0]),that.targets.push(this[1])})},ScrollSpy.prototype.process=function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.getScrollHeight(),maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(this.scrollHeight!=scrollHeight&&this.refresh(),scrollTop>=maxScroll)return activeTarget!=(i=targets[targets.length-1])&&this.activate(i);if(activeTarget&&scrollTop<offsets[0])return this.activeTarget=null,this.clear();for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(void 0===offsets[i+1]||scrollTop<offsets[i+1])&&this.activate(targets[i])},ScrollSpy.prototype.activate=function(target){this.activeTarget=target,this.clear();var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).addClass("current");active.trigger("activate.bs.scrollspy")},ScrollSpy.prototype.clear=function(){$(this.selector).removeClass("current")};var old=$.fn.scrollspy;$.fn.scrollspy=Plugin,$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).width()>900&&$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);Plugin.call($spy,$spy.data())})})}(jQuery);